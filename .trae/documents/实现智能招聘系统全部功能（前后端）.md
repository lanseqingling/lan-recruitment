## 总体目标

* 在现有 Monorepo 骨架基础上，按 docs 中的需求与编码规范，补齐完整可用的“毕业设计版”智能招聘系统：注册登录、角色权限、简历/岗位/标签/公告、投递、以及基于余弦相似度的推荐与筛选。

## 一、数据库与数据模型

* 校对并统一库表：以 `backend/sql/init.sql` 为唯一落地脚本，确保“禁止外键、禁止联表查询”前提下能支撑审核、附件上传、推荐等业务。

* 关键调整（如现有表缺字段会补齐）：

  * 用户：HR 审核状态（例如 `audit_status` 或复用 `status` 明确含义）、头像字段、基础信息字段。

  * 岗位：岗位审核状态（管理员审核）、上下架状态分离。

  * 简历：附件简历存储字段（文件名/URL/类型/大小）或最小可用字段。

  * 标签：确保技能类/非技能类可区分（tag\_type）且有 base\_weight。

* 初始化基础数据：

  * 预置管理员账号（不开放注册入口，按需求文档约束）。

  * 可选：预置少量标签，便于演示与截图。

## 二、认证与鉴权（Sa-Token，集中式）

* 统一 API 命名空间，便于集中鉴权：

  * `/api/public/**`：健康检查、登录注册、发送验证码等无需登录接口

  * `/api/common/**`：任意登录用户可访问（如 `/me`）

  * `/api/user/**`：求职者 USER

  * `/api/hr/**`：企业 HR

  * `/api/admin/**`：管理员 ADMIN

* 改造鉴权实现：在 `SaTokenConfig` 中按路由集中 `checkLogin / checkRole`，避免鉴权逻辑散落。

* 注册/登录能力：

  * 用户名+密码登录（密码加密存储，使用 Hutool/安全散列方案，避免明文）

  * 邮箱+验证码登录/注册（验证码带 TTL，避免长期有效；不引入复杂中间件，先用内存 TTL 实现，可演示）

  * 登录后在 token session 中写入 role，便于统一鉴权。

## 三、个人中心（通用）

* 后端接口：获取当前用户、更新基本信息、修改密码、上传头像。

* 文件上传：落到 `backend/uploads/`，并在 WebMvc 做静态资源映射（GET 访问文件）。

## 四、管理员模块（ADMIN）

* 标签库管理：标签 CRUD、按类型查询、启停用。

* 公告管理：公告 CRUD、上下线。

* 审核：

  * 审核 HR 注册（通过/拒绝/禁用）

  * 审核岗位发布（通过/拒绝），确保 HR 发布后默认进入待审核。

## 五、求职者模块（USER）

* 简历管理：在线简历 CRUD、设置默认简历。

* 简历标签配置：维护 resume\_tag（技能标签带熟练度，非技能标签不强制）。

* 附件简历上传：支持 PDF/JPG/PNG，返回 URL 并写入简历记录。

* 岗位浏览/搜索：按关键词/城市/岗位类型查询，返回 feed 流数据。

* 投递：选择简历投递岗位，生成 job\_apply 记录。

## 六、HR 模块（HR）

* 岗位管理：发布/编辑/上下架、配置岗位标签；发布后进入待审核。

* 简历筛选：查看投递到岗位的简历列表；结合匹配度排序；支持按学历/标签的简单筛选（通过业务代码多次查询+内存过滤，避免联表）。

* 投递处理：更新投递状态（已查看/通过/拒绝）。

## 七、智能推荐与匹配（核心：余弦相似度）

* 向量构建：

  * 统一为「tagId -> weight」向量

  * 技能标签：weight = base\_weight \* proficiency（精通3/熟悉2/了解1）

  * 非技能标签：weight = base\_weight

* 计算：cosine = dot(a,b) / (||a|| \* ||b||)

* 持久化：对 (resume\_id, job\_id) upsert 到 match\_score；

  * 触发策略：简历标签变更/岗位标签变更时重算相关集合，或在“推荐/筛选查询”时按需重算（优先实现按需重算，简单可控）。

* 接口：

  * USER：首页推荐岗位列表（返回 matchScore）

  * HR：岗位投递简历列表按 matchScore 排序

## 八、前端页面落地（Vue3 + Element Plus，页面级开发）

* 登录/注册页：对接后端接口，保存 token 与角色信息。

* Layout：菜单根据角色显示；顶部搜索框联动岗位搜索。

* 首页：左侧筛选 + 右侧岗位卡片 feed 流；展示匹配度；支持“投递简历”。

* 简历管理页：CRUD + 标签配置 + 附件上传。

* 岗位管理页：HR 发布/编辑 + 标签配置 + 查看投递简历/处理状态。

* 标签库/公告页：管理员 CRUD。

* 个人中心：基本信息/密码/头像。

* Axios：请求拦截器统一带上 Sa-Token token-name（`satoken`）并做简单错误提示。

## 九、联调与验收（可运行、可演示）

* 后端：`mvn -DskipTests package`、启动后验证核心接口（health、注册/登录、推荐、投递、管理 CRUD）。

* 前端：`npm run dev`、跑通典型演示链路：

  * USER：注册→登录→建简历+标签→首页推荐→投递

  * HR：登录→发岗位+标签→查看投递→按匹配度筛选→处理状态

  * ADMIN：审核 HR/岗位→维护标签/公告

## 重要说明（与现状差异）

* 目前 `docs/库表设计.md` 中有 `user` 表名与外键示例；实现会以“禁止外键”为准，并对表名做一次统一（避免 MySQL `user` 关键字/系统表冲突）。表名与字段最终以 `init.sql` 为准，必要时同步调整文档。

* 执行过程中严格遵循/docs中的4个项目文件

