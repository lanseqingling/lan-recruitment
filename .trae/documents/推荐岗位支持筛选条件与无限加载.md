## 目标
- 让“筛选岗位”对【推荐岗位】也生效：结果先按筛选条件过滤，再按匹配算法排序。
- 继续支持下拉加载（分页/无限滚动）。

## 现状排查结论
- 目前筛选条件只传给 /api/public/job/list（最新岗位）。
- 推荐岗位接口 /api/user/job/recommend 仅接收 resumeId/offset/pageSize，服务端固定取最新 100 条岗位算分后排序，再用 offset/pageSize 截断，因此无法应用筛选条件。

## 后端改动
- 扩展推荐接口参数（保持兼容）：
  - Controller [JobBrowseController](file:///Users/bytedance/java/lan-recruitment/backend/src/main/java/com/lanrecruitment/controller/JobBrowseController.java)：新增可选参数 keyword、city、jobType、tagIds，并透传给 service。
  - Service 接口 [JobBrowseService](file:///Users/bytedance/java/lan-recruitment/backend/src/main/java/com/lanrecruitment/service/JobBrowseService.java)：recommend 方法签名增加这些参数。
- 在 [JobBrowseServiceImpl](file:///Users/bytedance/java/lan-recruitment/backend/src/main/java/com/lanrecruitment/service/impl/JobBrowseServiceImpl.java) 的 recommend() 中应用筛选：
  - 复用与 listPublic 一致的筛选语义：
    - keyword：jobName/description like
    - city/jobType：eq
    - tagIds：通过 JobTag 表取 jobId 集合并 in(Job::getId)
    - status=1、auditStatus=1 仍保留
  - 先“筛选后取样”：按 id desc 查询（limit 保持 100 或按需要稍增），再对候选岗位计算 matchScore 并排序。
  - 为保证分页稳定：排序规则改为 matchScore desc，再用 jobId desc 做二级排序（避免同分导致翻页重复/缺失）。

## 前端改动
- 首页推荐岗位请求携带筛选条件：
  - [Home.vue](file:///Users/bytedance/java/lan-recruitment/frontend/src/pages/Home.vue) 的 loadMoreRecommendJobs 调用 recommendJobs 时，追加 keyword/city/jobType/tagIds（tagIds 逗号拼接，与最新岗位一致）。
- 让“查询”按钮对当前 tab 生效：
  - 点击“查询”时不强制切到最新岗位；根据 activeTab 重置并拉取推荐或最新。
  - 切换 tab 时也使用当前 filters 拉取对应列表。
- 无限加载保持不变：
  - 推荐继续 offset/pageSize；当筛选条件变化时重置 offset、hasMore、列表内容。

## 验证方式
- 手工验证：
  - USER 进入首页，切到“推荐岗位”，设置城市/岗位类型/标签/关键词，点击查询，推荐列表应变为“满足筛选 + 仍按匹配度排序”。
  - 下滑触发加载更多，追加的数据也应满足筛选条件。
  - 切换到“最新岗位”，筛选仍正常。
- 构建校验：前端 npm run build；后端 mvn -DskipTests package。

## 兼容性与风险控制
- 新增参数均为可选，不影响现有调用。
- 仍保留候选 limit（避免一次计算过多岗位的匹配分）。如筛选过窄导致不足页数，将自然返回更少数据并终止 hasMore。